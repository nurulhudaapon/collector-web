const std = @import("std");

const zx = @import("zx");

const app = @import("app");
const backend = @import("backend");

pub fn Page(ctx: app.PageCtx) !zx.Component {
    const name = ctx.request.getParam("name") orelse return error.MissingName;

    var session = try ctx.app.pool.getSession(ctx.arena);
    defer session.deinit();

    const count = try backend.fetch(&session, name);

    return (
        <div @allocator={ctx.arena}>
            Fetched {count} cards
        </div>
    );
}
